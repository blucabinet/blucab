{% extends 'main/base.html' %}

{% block title %}
blucab - User Settings
{% endblock %}

{% load crispy_forms_tags %}

{% block content %}
<h1>User Settings</h1>

{% if user.is_authenticated %}
    <div>Let's check your settings {{ user.get_username }}!</div>
    <br>
    
    <div class="card" style="max-width: 28rem;">
        <div class="card-header">
            General Settings
        </div>
        <div class="card-body">
            <form method="post" class="form-group">
                {% csrf_token %}
                {{ form|crispy }}
                <button type="submit" class="btn btn-success">Save</button>
            </form>
        </div>
    </div>

    <br>
    <div class="card" style="max-width: 28rem;">
        <div class="card-header">
            Import/Export
        </div>
        <div class="card-body">
            <a href="/user/import" class="btn btn-outline-success" role="button">Import Movies</a>
            <br><br>
            <a href="/user/export" class="btn btn-success" role="button" data-bs-toggle="tooltip" data-placement="top" title="Export your Movies in blucab format">Export</a>
            (Last export: {{ usersettings.last_export }})
        </div>
    </div>

    <br>
    <div class="card" style="max-width: 28rem;">
        <div class="card-header">
            Account Settings
        </div>
        <div class="card-body">
            <a href="/user/change_password" class="btn btn-outline-success" role="button">Change Password</a>
            <br><br>
            <a href="/user/delete/" class="btn btn-outline-danger" role="button">Delete Account</a>
        </div>
    </div>

{% else %}
    <div>Welcome!</div>
    <a class="nav-link" href="/login">Login</a>
{% endif %}

{% endblock %}
